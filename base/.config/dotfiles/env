# locale
export LANG='en_US.UTF-8'
export LANGUAGE='en_US.UTF-8'

export XDG_CONFIG_HOME="${HOME}/.config"
export XDG_CACHE_HOME="${HOME}/.cache"
export XDG_DATA_HOME="${HOME}/.local/share"
# note: usually, *nix distributions set runtime dir - probably a systemd thing
# openrc doesn't, so alpine and gentoo linux (pure openrc; no consolekit) need this bootstrapped here for software that does need it
# e.g. urxvtd, swaywm
if [ -z "$XDG_RUNTIME_DIR" ]; then
    XDG_RUNTIME_DIR="/tmp/${UID}-runtime-dir"
    mkdir -p "$XDG_RUNTIME_DIR"
    chmod 0700 "$XDG_RUNTIME_DIR"
    export XDG_RUNTIME_DIR
fi

pathprepend () {
    for DIR in "$@"; do
        if [ ! -d "$DIR" ]; then
#            df_warn "pathprepend: ${DIR} does not exist"
            continue
        fi
        # not a completely correct test here, but good enough
        # (won't be correct if PATH is empty or DIR is the last entry in path)
        if [ ${PATH#*"${DIR}:"} != "$PATH" ]; then
#            df_warn "pathprepend: ${DIR} already in PATH; skipping"
            continue
        fi
        PATH="${DIR}${PATH:+":$PATH"}"
    done
}

# let distribution take care of system PATH e.g. /usr/local/bin
pathprepend             \
    ${HOME}/bin         \
    ${HOME}/bin/custom  \
    ${HOME}/.local/bin

export PATH

export PAGER='less'
export LESS='-irS'
if df_require micro; then
    export EDITOR='micro'
else
    export EDITOR='nano'
fi
export GIT_EDITOR="$EDITOR"
export GIT_PAGER="$PAGER"
export GPG_TTY="$(tty)"

# xdg
export XAUTHORITY="${XDG_RUNTIME_DIR}/Xauthority"
export INPUTRC="${XDG_CONFIG_HOME}/readline/inputrc"
export LESSHISTFILE="${XDG_DATA_HOME}/less_history"
df_require urxvt && export RXVT_SOCKET="${XDG_RUNTIME_DIR}/urxvtd"
df_require adb && export ANDROID_SDK_HOME="${XDG_CONFIG_HOME}/android"
df_require sqlite3 && export SQLITE_HISTORY="${XDG_DATA_HOME}/sqlite_history"
df_require gpg && export GNUPGHOME="${XDG_DATA_HOME}/gnupg"
df_require pass && export PASSWORD_STORE_DIR="${XDG_DATA_HOME}/password-store"
